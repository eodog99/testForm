<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3depth nav</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="reset.css">
</head>

<body>
    <aside class="nav-wrap">
        <ul>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none">
                            <path
                                d="M6 16.0007H14M9.0177 1.76473L2.23539 7.03986C1.78202 7.39248 1.55534 7.56879 1.39203 7.78959C1.24737 7.98518 1.1396 8.20552 1.07403 8.43978C1 8.70425 1 8.99143 1 9.56578V16.8007C1 17.9208 1 18.4809 1.21799 18.9087C1.40973 19.285 1.71569 19.591 2.09202 19.7827C2.51984 20.0007 3.07989 20.0007 4.2 20.0007H15.8C16.9201 20.0007 17.4802 20.0007 17.908 19.7827C18.2843 19.591 18.5903 19.285 18.782 18.9087C19 18.4809 19 17.9208 19 16.8007V9.56578C19 8.99143 19 8.70425 18.926 8.43978C18.8604 8.20552 18.7526 7.98518 18.608 7.78959C18.4447 7.56879 18.218 7.39248 17.7646 7.03986L10.9823 1.76473C10.631 1.49148 10.4553 1.35485 10.2613 1.30233C10.0902 1.25599 9.9098 1.25599 9.73865 1.30233C9.54468 1.35485 9.36902 1.49148 9.0177 1.76473Z"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                    </div>
                </div>
            </li>
            <hr>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" title="종합속보아이콘" width="22" height="18"
                            viewBox="0 0 22 18" fill="none">
                            <path
                                d="M20.5 15L13.8571 9M8.14286 9L1.50003 15M1 4L9.16492 9.71544C9.82609 10.1783 10.1567 10.4097 10.5163 10.4993C10.8339 10.5785 11.1661 10.5785 11.4837 10.4993C11.8433 10.4097 12.1739 10.1783 12.8351 9.71544L21 4M5.8 17H16.2C17.8802 17 18.7202 17 19.362 16.673C19.9265 16.3854 20.3854 15.9265 20.673 15.362C21 14.7202 21 13.8802 21 12.2V5.8C21 4.11984 21 3.27976 20.673 2.63803C20.3854 2.07354 19.9265 1.6146 19.362 1.32698C18.7202 1 17.8802 1 16.2 1H5.8C4.11984 1 3.27976 1 2.63803 1.32698C2.07354 1.6146 1.6146 2.07354 1.32698 2.63803C1 3.27976 1 4.11984 1 5.8V12.2C1 13.8802 1 14.7202 1.32698 15.362C1.6146 15.9265 2.07354 16.3854 2.63803 16.673C3.27976 17 4.11984 17 5.8 17Z"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none">
                            <path d="M1 1L5 5L9 1" stroke="#ABB0B9" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <ul class="depth2-wrap">
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" title="조업현황아이콘" width="20" height="20"
                            viewBox="0 0 20 20" fill="none">
                            <path
                                d="M7 5H2.6C2.03995 5 1.75992 5 1.54601 5.10899C1.35785 5.20487 1.20487 5.35785 1.10899 5.54601C1 5.75992 1 6.03995 1 6.6V17.4C1 17.9601 1 18.2401 1.10899 18.454C1.20487 18.6422 1.35785 18.7951 1.54601 18.891C1.75992 19 2.03995 19 2.6 19H7M7 19H13M7 19L7 2.6C7 2.03995 7 1.75992 7.10899 1.54601C7.20487 1.35785 7.35785 1.20487 7.54601 1.10899C7.75992 1 8.03995 1 8.6 1L11.4 1C11.9601 1 12.2401 1 12.454 1.10899C12.6422 1.20487 12.7951 1.35785 12.891 1.54601C13 1.75992 13 2.03995 13 2.6V19M13 9H17.4C17.9601 9 18.2401 9 18.454 9.10899C18.6422 9.20487 18.7951 9.35785 18.891 9.54601C19 9.75992 19 10.0399 19 10.6V17.4C19 17.9601 19 18.2401 18.891 18.454C18.7951 18.6422 18.6422 18.7951 18.454 18.891C18.2401 19 17.9601 19 17.4 19H13"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none">
                            <path d="M1 1L5 5L9 1" stroke="#ABB0B9" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <ul class="depth2-wrap">
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" title="조업통계분석아이콘" width="20" height="20"
                            viewBox="0 0 22 22" fill="none">
                            <path
                                d="M11 1C12.3132 1 13.6136 1.25866 14.8268 1.76121C16.0401 2.26375 17.1425 3.00035 18.0711 3.92893C18.9997 4.85752 19.7363 5.95991 20.2388 7.17317C20.7413 8.38643 21 9.68679 21 11M11 1V11M11 1C5.47715 1 1 5.47715 1 11C1 16.5228 5.47715 21 11 21C16.5228 21 21 16.5229 21 11M11 1C16.5228 1 21 5.47716 21 11M21 11L11 11M21 11C21 12.5781 20.6265 14.1338 19.9101 15.5399C19.1936 16.946 18.1546 18.1626 16.8779 19.0902L11 11"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>

                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none">
                            <path d="M1 1L5 5L9 1" stroke="#ABB0B9" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <ul class="depth2-wrap">
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                </ul>
                <ul class="depth2-wrap">
                    <li class="depth2-text"><a>2Depth</a></li>
                    <ul class="depth3-wrap">
                        <li>3Depth</li>
                    </ul>
                </ul>
            </li>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" title="비정형분석아이콘" width="20" height="20"
                            viewBox="0 0 20 20" fill="none">
                            <path
                                d="M6 11V15M14 9V15M10 5V15M5.8 19H14.2C15.8802 19 16.7202 19 17.362 18.673C17.9265 18.3854 18.3854 17.9265 18.673 17.362C19 16.7202 19 15.8802 19 14.2V5.8C19 4.11984 19 3.27976 18.673 2.63803C18.3854 2.07354 17.9265 1.6146 17.362 1.32698C16.7202 1 15.8802 1 14.2 1H5.8C4.11984 1 3.27976 1 2.63803 1.32698C2.07354 1.6146 1.6146 2.07354 1.32698 2.63803C1 3.27976 1 4.11984 1 5.8V14.2C1 15.8802 1 16.7202 1.32698 17.362C1.6146 17.9265 2.07354 18.3854 2.63803 18.673C3.27976 19 4.11984 19 5.8 19Z"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none">
                            <path d="M1 1L5 5L9 1" stroke="#ABB0B9" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <ul class="depth2-wrap">
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" title="조업표준관리아이콘" width="22" height="20"
                            viewBox="0 0 22 20" fill="none">
                            <path
                                d="M11 14V19M11 14L17 19M11 14L5 19M20 1V9.2C20 10.8802 20 11.7202 19.673 12.362C19.3854 12.9265 18.9265 13.3854 18.362 13.673C17.7202 14 16.8802 14 15.2 14H6.8C5.11984 14 4.27976 14 3.63803 13.673C3.07354 13.3854 2.6146 12.9265 2.32698 12.362C2 11.7202 2 10.8802 2 9.2V1M7 7V10M11 5V10M15 9V10M21 1H1"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>

                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none">
                            <path d="M1 1L5 5L9 1" stroke="#ABB0B9" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <ul class="depth2-wrap">
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="menu-item">
                <div class="depth1-wrap">
                    <div class="menu-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" title="FDPS" width="22" height="19" viewBox="0 0 22 19"
                            fill="none">
                            <path
                                d="M19 18V11M11 18V8M3 18L3 14M12.4067 3.0275L17.5751 4.96567M9.79877 3.40092L4.20023 7.59983M20.0607 4.43934C20.6464 5.02513 20.6464 5.97487 20.0607 6.56066C19.4749 7.14645 18.5251 7.14645 17.9393 6.56066C17.3536 5.97487 17.3536 5.02513 17.9393 4.43934C18.5251 3.85355 19.4749 3.85355 20.0607 4.43934ZM4.06066 7.43934C4.64645 8.02513 4.64645 8.97487 4.06066 9.56066C3.47487 10.1464 2.52513 10.1464 1.93934 9.56066C1.35355 8.97487 1.35355 8.02513 1.93934 7.43934C2.52513 6.85355 3.47487 6.85355 4.06066 7.43934ZM12.0607 1.43934C12.6464 2.02513 12.6464 2.97487 12.0607 3.56066C11.4749 4.14645 10.5251 4.14645 9.93934 3.56066C9.35355 2.97487 9.35355 2.02513 9.93934 1.43934C10.5251 0.853553 11.4749 0.853553 12.0607 1.43934Z"
                                stroke="#ABB0B9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>

                    <div class="menu-text">
                        <p class="text-li"><a href="#" class="menuLink"><span>1Depth</span></a></p>
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" fill="none">
                            <path d="M1 1L5 5L9 1" stroke="#ABB0B9" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>
                <ul class="depth2-wrap">
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                    <li>
                        <div class="depth2-text"><a>2Depth</a></div>
                        <ul class="depth3-wrap">
                            <li>3Depth</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </aside>

</body>
<script>
    // 네비게이션 스크립트 실행을 위한 초기 진입함수
    //nav 선택자로 전달가능 
    function initNavScript(containerSelector) {
        //containerSeletor엔 nav-wrap가 들어감
        const container = document.querySelector(containerSelector);

        function bindDepth1Events() {
            container.querySelectorAll(".depth1-wrap").forEach((depth1) => {
                depth1.addEventListener("click", () => toggleDepth1(depth1));
            });
        }

        function toggleDepth1(element) {
            const isActive = element.classList.contains("active");
            const menuId = element.dataset.menu;

            container.querySelectorAll(".depth1-wrap").forEach((el) => {
                el.classList.remove("active");
                // el.nextElementSibling: el 다음 형제요소를 의미
                // 다음 형재 요소가 있으면 open클래스를 지워라는 뜻
                el.nextElementSibling?.classList.remove("open");
            });

            if (!isActive) {
                element.classList.add("active");
                element.nextElementSibling?.classList.add("open");

                if (menuId) activateClosedMenu(menuId);
            }
        }

        function bindDepth2Events() {
            container.querySelectorAll(".depth2-text").forEach((depth2) => {
                depth2.addEventListener("click", (e) => {
                    e.stopPropagation();
                    toggleDepth2(depth2);
                });
            });
        }

        function toggleDepth2(element) {
            const parentWrap = element.closest(".depth2-wrap");
            const isActive = element.classList.contains("active");

            parentWrap?.querySelectorAll(".depth2-text").forEach((el) => {
                el.classList.remove("active");
                el.nextElementSibling?.classList.remove("open");
            });

            if (!isActive) {
                element.classList.add("active");
                element.nextElementSibling?.classList.add("open");
            }
        }

        function bindDepth3Events() {
            container.querySelectorAll(".depth3-text a").forEach((link) => {
                link.addEventListener("click", () => {
                    const menuId = link.closest(".depth3-wrap")?.dataset.menu;
                    if (menuId) activateClosedMenu(menuId);
                });
            });
        }

        // 실행
        bindDepth1Events();
        bindDepth2Events();
        bindDepth3Events();
    }
    initNavScript(".nav-wrap"); // 다른 페이지에 커스텀 nav 적용 가능


    // 클래스들을 제거함
    function resetMenu(container) {
        container.querySelectorAll('.depth1-wrap').forEach(el => el.classList.remove('active'));
        container.querySelectorAll('.depth2.text').forEach(el => el.classList.remove('active'));
        container.querySelectorAll('.depth2-wrap, .depth3-wrap').forEach(el => el.classList.remove('open'));

    }

    // .nav-wrap를 찾고 마우스가 떠났을 떄 resetMenu함수 실행
    document.addEventListener('DOMContentLoaded', function () {
        const menuWrapper = document.querySelector('.nav-wrap');

        if (menuWrapper) {
            menuWrapper.addEventListener('mouseleave', function () {
                resetMenu(menuWrapper);
            });
        }
    });


</script>

</html>